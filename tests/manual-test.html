<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - Skills</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h2 {
            margin-top: 0;
            color: #6366f1;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-left: 3px solid #6366f1;
        }
        .test-result {
            margin-top: 5px;
            padding: 5px;
            border-radius: 4px;
        }
        .pass {
            background: #d4edda;
            color: #155724;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
        }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #4f46e5;
        }
        #test-output {
            margin-top: 20px;
            padding: 15px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üß™ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Skills</h1>
    
    <div class="test-section">
        <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h2>
        <div class="test-item">
            <strong>–¢–µ—Å—Ç:</strong> TOPICS_CONFIG –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω<br>
            <div id="test-config" class="test-result">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
        <div class="test-item">
            <strong>–¢–µ—Å—Ç:</strong> –í—Å–µ —Ç–µ–º—ã –∏–º–µ—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è<br>
            <div id="test-config-fields" class="test-result">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ ProgressManager</h2>
        <div class="test-item">
            <strong>–¢–µ—Å—Ç:</strong> –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ localStorage<br>
            <div id="test-progress-save" class="test-result">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
        <div class="test-item">
            <strong>–¢–µ—Å—Ç:</strong> –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞<br>
            <div id="test-progress-stats" class="test-result">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
        <button onclick="testProgressReset()">–¢–µ—Å—Ç: –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
    </div>
    
    <div class="test-section">
        <h2>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</h2>
        <div class="test-item">
            <strong>–¢–µ—Å—Ç:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM<br>
            <div id="test-dom-elements" class="test-result">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
        <button onclick="testFilter()">–¢–µ—Å—Ç: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è</button>
        <button onclick="testSearch()">–¢–µ—Å—Ç: –ü–æ–∏—Å–∫</button>
    </div>
    
    <div class="test-section">
        <h2>4. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤</h2>
        <button onclick="runAllTests()" style="background: #10b981; font-size: 16px; padding: 15px 30px;">
            ‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
        </button>
        <div id="test-output"></div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ -->
    <script src="../js/config.js"></script>
    <script src="../js/progress.js"></script>
    
    <script>
        let testOutput = [];
        
        function log(message, type = 'info') {
            const prefix = type === 'pass' ? '‚úÖ' : type === 'fail' ? '‚ùå' : '‚ÑπÔ∏è';
            testOutput.push(`${prefix} ${message}`);
            updateOutput();
        }
        
        function updateOutput() {
            document.getElementById('test-output').textContent = testOutput.join('\n');
        }
        
        function setResult(elementId, message, passed) {
            const el = document.getElementById(elementId);
            el.textContent = message;
            el.className = 'test-result ' + (passed ? 'pass' : 'fail');
        }
        
        // –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function testConfig() {
            try {
                if (typeof TOPICS_CONFIG !== 'undefined' && Array.isArray(TOPICS_CONFIG)) {
                    setResult('test-config', `‚úì –ù–∞–π–¥–µ–Ω–æ ${TOPICS_CONFIG.length} —Ç–µ–º`, true);
                    log(`–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ${TOPICS_CONFIG.length} —Ç–µ–º`, 'pass');
                } else {
                    setResult('test-config', '‚úó TOPICS_CONFIG –Ω–µ –Ω–∞–π–¥–µ–Ω', false);
                    log('TOPICS_CONFIG –Ω–µ –Ω–∞–π–¥–µ–Ω', 'fail');
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π
                if (typeof TOPICS_CONFIG !== 'undefined') {
                    let allValid = true;
                    TOPICS_CONFIG.forEach((topic, index) => {
                        const required = ['id', 'icon', 'title', 'description', 'badge', 'category'];
                        const missing = required.filter(field => !topic[field]);
                        if (missing.length > 0) {
                            allValid = false;
                            log(`–¢–µ–º–∞ ${index}: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è ${missing.join(', ')}`, 'fail');
                        }
                    });
                    setResult('test-config-fields', allValid ? '‚úì –í—Å–µ –ø–æ–ª—è –Ω–∞ –º–µ—Å—Ç–µ' : '‚úó –ï—Å—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è', allValid);
                }
            } catch (e) {
                setResult('test-config', `‚úó –û—à–∏–±–∫–∞: ${e.message}`, false);
                log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ${e.message}`, 'fail');
            }
        }
        
        // –¢–µ—Å—Ç—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function testProgress() {
            try {
                if (typeof ProgressManager === 'undefined') {
                    setResult('test-progress-save', '‚úó ProgressManager –Ω–µ –Ω–∞–π–¥–µ–Ω', false);
                    return;
                }
                
                // –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                const testTopic = 'test-topic-' + Date.now();
                ProgressManager.markAsVisited(testTopic);
                const visited = ProgressManager.getVisitedTopics();
                
                if (visited.includes(testTopic)) {
                    setResult('test-progress-save', '‚úì –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è', true);
                    log('–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è', 'pass');
                } else {
                    setResult('test-progress-save', '‚úó –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', false);
                    log('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞', 'fail');
                }
                
                // –¢–µ—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                const stats = ProgressManager.getStats();
                if (stats && typeof stats.visited === 'number' && typeof stats.total === 'number') {
                    setResult('test-progress-stats', `‚úì –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ${stats.visited}/${stats.total} (${stats.percentage}%)`, true);
                    log(`–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${stats.visited}/${stats.total} —Ç–µ–º`, 'pass');
                } else {
                    setResult('test-progress-stats', '‚úó –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏', false);
                }
            } catch (e) {
                log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: ${e.message}`, 'fail');
            }
        }
        
        function testProgressReset() {
            try {
                const before = ProgressManager.getVisitedTopics().length;
                ProgressManager.reset();
                const after = ProgressManager.getVisitedTopics().length;
                
                if (after === 0) {
                    alert('‚úÖ –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                    log('–°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç', 'pass');
                } else {
                    alert('‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞');
                    log('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞', 'fail');
                }
            } catch (e) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + e.message);
                log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ: ${e.message}`, 'fail');
            }
        }
        
        // –¢–µ—Å—Ç—ã DOM
        function testDOM() {
            try {
                const requiredElements = [
                    'topic-search',
                    'category-filter',
                    'progress-bar',
                    'progress-text'
                ];
                
                let allFound = true;
                requiredElements.forEach(id => {
                    const el = document.getElementById(id);
                    if (!el) {
                        allFound = false;
                        log(`–≠–ª–µ–º–µ–Ω—Ç #${id} –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'fail');
                    }
                });
                
                if (allFound) {
                    setResult('test-dom-elements', '‚úì –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã DOM –Ω–∞–π–¥–µ–Ω—ã', true);
                    log('–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã DOM –Ω–∞ –º–µ—Å—Ç–µ', 'pass');
                } else {
                    setResult('test-dom-elements', '‚úó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', false);
                }
            } catch (e) {
                log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ DOM: ${e.message}`, 'fail');
            }
        }
        
        function testFilter() {
            if (typeof filterTopics === 'undefined') {
                alert('–§—É–Ω–∫—Ü–∏—è filterTopics –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ');
                return;
            }
            log('–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç DOM –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ—Ç–∫—Ä–æ–π—Ç–µ index.php)', 'info');
        }
        
        function testSearch() {
            log('–ü–æ–∏—Å–∫ —Ç—Ä–µ–±—É–µ—Ç DOM –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ—Ç–∫—Ä–æ–π—Ç–µ index.php)', 'info');
        }
        
        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        function runAllTests() {
            testOutput = [];
            log('=== –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ ===', 'info');
            log('', 'info');
            
            log('1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...', 'info');
            testConfig();
            log('', 'info');
            
            log('2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞...', 'info');
            testProgress();
            log('', 'info');
            
            log('3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DOM...', 'info');
            testDOM();
            log('', 'info');
            
            log('=== –¢–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã ===', 'info');
            
            const passed = testOutput.filter(t => t.includes('‚úÖ')).length;
            const failed = testOutput.filter(t => t.includes('‚ùå')).length;
            log(`\n–†–µ–∑—É–ª—å—Ç–∞—Ç: ${passed} —É—Å–ø–µ—à–Ω–æ, ${failed} –æ—à–∏–±–æ–∫`, passed > 0 ? 'pass' : 'fail');
        }
        
        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                testConfig();
                testProgress();
            }, 100);
        });
    </script>
</body>
</html>

